<?xml version="1.0" encoding="UTF-8"?>
<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0">

	<!-- Single point of entry to create/modify/update/get resources -->
	<bean id="resourceManager" class="net.i2cat.nexus.resources.ResourceManager" />

	<!-- Listen for Resource Repositories -->
	<reference-list interface="net.i2cat.nexus.resources.IResourceRepository"
		availability="optional">
		<reference-listener ref="resourceManager"
			bind-method="resourceRepositoryAdded" unbind-method="resourceRepositoryRemoved" />
	</reference-list>

	<!-- Register a ResourceManager as an OSGi Service -->
	<service ref="resourceManager"
		interface="net.i2cat.nexus.resources.IResourceManager" />

	<!-- Provide commands to the Karaf shell -->
	<command-bundle xmlns="http://karaf.apache.org/xmlns/shell/v1.0.0">
		<command name="nexus/create">
			<action class="net.i2cat.nexus.resources.shell.CreateResourceCommand" />
		</command>
		<command name="nexus/list">
			<action class="net.i2cat.nexus.resources.shell.ListResourcesCommand" />
		</command>
		<command name="nexus/remove">
			<action class="net.i2cat.nexus.resources.shell.RemoveResourceCommand" />
		</command>
		<command name="nexus/start">
			<action class="net.i2cat.nexus.resources.shell.StartResourceCommand" />
		</command>
		<command name="nexus/stop">
			<action class="net.i2cat.nexus.resources.shell.StopResourceCommand" />
		</command>
		<command name="nexus/export">
			<action class="net.i2cat.nexus.resources.shell.ExportResourceDescriptorCommand" />
		</command>					
	</command-bundle>

</blueprint>