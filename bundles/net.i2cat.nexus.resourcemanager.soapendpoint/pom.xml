<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <parent>
	<artifactId>mantychore-bundles</artifactId>
	<groupId>net.i2cat.mantychore</groupId>
	<version>1.0.0-SNAPSHOT</version>
  </parent>
  <modelVersion>4.0.0</modelVersion>
  <groupId>net.i2cat.nexus</groupId>
  <artifactId>net.i2cat.nexus.resourcemanager.soapendpoint</artifactId>
  <version>1.0.0-SNAPSHOT</version>
  <name>Nexus :: Resource Manager SOAP Endpoint</name>
  <packaging>bundle</packaging>
  <dependencies>
	<dependency>
     		<groupId>org.apache.servicemix.specs</groupId>
     		<artifactId>org.apache.servicemix.specs.jaxb-api-2.1</artifactId>
     	</dependency> 
     	<dependency>
     		<groupId>org.apache.geronimo.specs</groupId>
     		<artifactId>geronimo-jaxws_2.1_spec</artifactId>
     	</dependency>
     	<dependency>
     		<groupId>org.apache.geronimo.specs</groupId>
     		<artifactId>geronimo-ws-metadata_2.0_spec</artifactId>
     	</dependency>
     	<dependency>
     		<groupId>org.springframework</groupId>
     		<artifactId>spring-context</artifactId>
     	</dependency>
     	<dependency>
     		<groupId>org.hsqldb</groupId>
     		<artifactId>com.springsource.org.hsqldb</artifactId>
     		<scope>test</scope>
     	</dependency>
     	<dependency>
     		<groupId>net.i2cat.nexus</groupId>
     		<artifactId>net.i2cat.nexus.resources</artifactId>
     		<version>1.0.0-SNAPSHOT</version>
     	</dependency>
     	<dependency>
     		<groupId>org.apache.cxf</groupId>
     		<artifactId>cxf-rt-core</artifactId>
     		<version>${cxf.version}</version>
     	</dependency>
     	<dependency>
     		<groupId>org.apache.cxf</groupId>
     		<artifactId>cxf-rt-frontend-jaxws</artifactId>
     		<version>${cxf.version}</version>
     	</dependency>
     	<dependency>
     		<groupId>org.apache.cxf</groupId>
     		<artifactId>cxf-rt-transports-http</artifactId>
     		<version>${cxf.version}</version>
     	</dependency>
     	<dependency>
     		<groupId>org.apache.cxf</groupId>
     		<artifactId>cxf-rt-transports-http-jetty</artifactId>
     		<version>${cxf.version}</version>
     	</dependency>
     	<dependency>
     		<groupId>org.apache.cxf</groupId>
     		<artifactId>cxf-rt-databinding-aegis</artifactId>
    		<version>${cxf.version}</version>
    	</dependency>
  </dependencies>

  <build>
    	<resources>
    		<resource>
    			<directory>src/main/resources</directory>
    		</resource>
    		<resource>
    			<directory>src/test/resources</directory>
    		</resource>
    	</resources>
    	<plugins>
    		<plugin>
    			<groupId>org.ops4j</groupId>
    			<artifactId>maven-pax-plugin</artifactId>
    			<version>1.4</version>
    			<!--
    				| enable improved OSGi compilation support for the bundle
    				life-cycle. | to switch back to the standard bundle life-cycle,
    				move this setting | down to the maven-bundle-plugin section
    			-->
   			<extensions>true</extensions>
   		</plugin>
    
   		<!-- WSDL Generation -->
    		<plugin>
    			<groupId>org.apache.cxf</groupId>
    			<artifactId>cxf-java2ws-plugin</artifactId>
    			<version>${cxf.java2ws.plugin.version}</version>
    			<dependencies>
    				<dependency>
    					<groupId>org.apache.cxf</groupId>
    					<artifactId>cxf-rt-frontend-jaxws</artifactId>
					<version>${cxf.java2ws.plugin.version}</version>
    				</dependency>
    				<dependency>
    					<groupId>org.apache.cxf</groupId>
    					<artifactId>cxf-rt-frontend-simple</artifactId>
					<version>${cxf.java2ws.plugin.version}</version>
   				</dependency>
    			</dependencies>
    			<executions>
    				<execution>
    					<id>process-classes</id>
    					<phase>process-classes</phase>
    					<configuration>
    						<className>net.i2cat.nexus.resourcemanager.soapendpoint.ResourceManagerSOAPEndpoint</className>
    						<outputFile>${basedir}/target/generated/wsdl/resourceManager.wsdl</outputFile>
   						<genWsdl>true</genWsdl>
    						<soap12>true</soap12>
    						<verbose>true</verbose>
    					</configuration>
    					<goals>
    						<goal>java2ws</goal>
    					</goals>
    				</execution>
    			</executions>
    		</plugin>
    		<plugin>
    			<groupId>org.apache.felix</groupId>
    			<artifactId>maven-bundle-plugin</artifactId>
    			<version>2.0.0</version>
    			<!--
    				| the following instructions build a simple set of public/private
   				classes into an OSGi bundle
    			-->
   			<configuration>
    				<instructions>
    					<Bundle-SymbolicName>${project.artifactId}
    					</Bundle-SymbolicName>
    					<Bundle-Version>${project.version}</Bundle-Version>
    					<!--
    						| assume public classes are in the top package, and private
    						classes are under ".internal"
    					-->
    					<Import-Package>!${bundle.namespace}.*,
    						org.slf4j;version="1.5.6",
    						org.osgi.service.event,
    						org.hibernate.proxy,
    						javassist.util.proxy,
    						javax.jws;version="1.0",
        					javax.wsdl,
        					META-INF.cxf;version="[0.0.0,${cxf.version})",
        					META-INF.cxf.osgi;version="[0.0.0,${cxf.version})",
        					org.apache.cxf,
       						org.apache.cxf.binding,
        					org.apache.cxf.binding.soap,
       						org.apache.cxf.binding.soap.spring,
        					org.apache.cxf.bus,
        					org.apache.cxf.bus.spring,
        					org.apache.cxf.bus.resource,
        					org.apache.cxf.buslifecycle,
        					org.apache.cxf.catalog, 
        					org.apache.cxf.configuration.spring,
        					org.apache.cxf.endpoint,
  	     					org.apache.cxf.headers,
        					org.apache.cxf.phase,
        					org.apache.cxf.resource,
       						org.apache.cxf.transport,
        					org.apache.cxf.transport.http,
        					org.apache.cxf.transport.http_osgi,
        					org.apache.cxf.transport.http.policy,
        					org.apache.cxf.workqueue,
        					org.apache.cxf.wsdl11,
        					org.springframework.beans.factory.config,
    						javax.jms,
    						net.i2cat.nexus.resources,
    						net.i2cat.nexus.resources.descriptor,
    						net.i2cat.nexus.resources.capability,
    						org.apache.activemq,
    						*</Import-Package>
    					<Export-Package>
    						net.i2cat.nexus.resourcemanager.soapendpoint*;version="${project.version}", 
    					</Export-Package>
    					<Require-Bundle>org.apache.cxf.bundle</Require-Bundle>
   					<DynamicImport-Package>org.apache.cxf.*</DynamicImport-Package>
    				</instructions>
   			</configuration>
    		</plugin>
    	</plugins>
    </build>

</project>
